<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Special Message for Pingu</title>
    <link rel="stylesheet" href="message.css" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/x-icon" href="assets/images/Penguin.png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600&family=Comfortaa:wght@400;600&family=Caveat:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/x-icon" />
    
  </head>
  <body>
    <!-- Theme toggle -->
    <div class="theme-toggle">
      <button id="theme-button" onclick="toggleTheme()">ğŸŒ™</button>
    </div>
    
    <!-- Preloader -->
    <div class="preloader">
      <div class="loader-circle"></div>
      <div class="preloader-penguin">ğŸ’Œ</div>
      <div class="loading-text">Loading Special Message...</div>
    </div>

    <!-- Top-left badge -->
    <div class="badge" id="badge-text">ğŸ’Œ Special Message</div>

    <!-- Navigation buttons -->
    <a href="gifts.html" class="prev-button">
      <span>â¬…ï¸</span> Back
    </a>
    <a href="index.html" class="next-button">
      <span>&#127968;</span> Home
    </a>

    <!-- Message Content -->
    <div class="glass-container message-container" id="message-container">
      <div class="letter-paper">
        <h1 class="message-greeting">Ğ¥Ğ°Ğ¹Ñ€Ñ‚ Pingu-Ğ´ÑÑ,</h1>
        <p class="message-body" id="message-body"></p>
        <p class="message-signature">from,<br />Neko ğŸ¾</p>

        <!-- Translate Button -->
        <button id="translate-btn" style="display: none" class="translate-btn quick-nav-btn">
          <span class="btn-icon">ğŸ‡°ğŸ‡·</span>
          <span>Translate to Korean</span>
        </button>
      </div>
    </div>

    <!-- Floating Balloons -->
    <div class="balloons">
      <div class="balloon" style="--delay: 2s; --color: #FF9AA2;">ğŸ’Œ</div>
      <div class="balloon" style="--delay: 3s; --color: #FFB7B2;">ğŸ’•</div>
      <div class="balloon" style="--delay: 4s; --color: #FFDAC1;">ğŸ’˜</div>
      <div class="balloon" style="--delay: 5s; --color: #E2F0CB;">ğŸ’–</div>
      <div class="balloon" style="--delay: 6s; --color: #B5EAD7;">ğŸ’—</div>
      <div class="balloon" style="--delay: 7s; --color: #C7CEEA;">ğŸ’“</div>
    </div>

    <!-- Confetti container -->
    <div id="confetti-container"></div>

    <!-- Scripts -->
    <script>
      // Dark/light theme 
      function toggleTheme() {
        const body = document.body;
        const themeButton = document.getElementById('theme-button');
        
        if (body.classList.contains('dark-theme')) {
          body.classList.remove('dark-theme');
          themeButton.textContent = 'ğŸŒ™'; // moon for dark mode
          localStorage.setItem('theme', 'light');
        } else {
          body.classList.add('dark-theme');
          themeButton.textContent = 'â˜€ï¸'; // sun for light mode
          localStorage.setItem('theme', 'dark');
        }
      }
      
      // Check for saved theme preference
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.body.classList.add('dark-theme');
        document.getElementById('theme-button').textContent = 'â˜€ï¸';
      }

      const originalMessage = `Ğ¢Ó©Ñ€ÑÓ©Ğ½ Ó©Ğ´Ñ€Ğ¸Ğ¹Ğ½ Ğ¼ÑĞ½Ğ´ Ñ…Ò¯Ñ€Ğ³ÑĞµ! ğŸ‰ Ğ­Ğ½Ñ Ğ¾Ğ½Ñ†Ğ³Ğ¾Ğ¹ Ó©Ğ´Ñ€Ğ¸Ğ¹Ğ³ Ñ‡Ğ¸Ğ½ÑŒ Ñ…Ğ°Ğ¼Ñ‚Ğ´Ğ°Ğ° Ñ‚ÑĞ¼Ğ´ÑĞ³Ğ»ÑĞ¶ Ğ±Ğ°Ğ¹Ğ³Ğ°Ğ°Ğ´Ğ°Ğ° Ò¯Ğ½ÑÑ…ÑÑÑ€ Ğ¸Ñ… Ğ±Ğ°ÑÑ€Ñ‚Ğ°Ğ¹ Ğ±Ğ°Ğ¹Ğ½Ğ°. Ğ§Ğ¸Ğ½Ğ¸Ğ¹ Ğ¸Ğ½ÑÑĞ¼ÑÑĞ³Ğ»ÑĞ», Ñ…Ó©Ğ³Ğ¶Ğ¸Ğ»Ñ‚ÑĞ¹ Ğ±Ğ°Ğ¹Ğ´Ğ°Ğ» Ğ±Ğ¸Ğ´Ğ½Ğ¸Ğ¹ Ó©Ğ´Ó©Ñ€ Ğ±Ò¯Ñ€Ğ¸Ğ¹Ğ³ Ğ³ÑÑ€ÑĞ»Ñ‚Ò¯Ò¯Ğ»Ğ´ÑĞ³ ÑˆÒ¯Ò¯. Ğ§Ğ°Ğ¼Ñ‚Ğ°Ğ¹ Ó©Ğ½Ğ³Ó©Ñ€Ò¯Ò¯Ğ»ÑÑĞ½ Ñ…Ğ¾Ñ€Ğ¾Ğ¼ Ğ¼Ó©Ñ‡ Ğ±Ò¯Ñ…ÑĞ½ Ò¯Ğ½Ñ Ñ†ÑĞ½ÑÑ‚ÑĞ¹ Ğ±Ó©Ğ³Ó©Ó©Ğ´ Ğ±Ğ¸Ğ´Ğ½Ğ¸Ğ¹ Ğ´ÑƒÑ€ÑĞ°Ğ¼Ğ¶Ğ¸Ğ¹Ğ½ ÑĞ°Ğ½ ÑƒĞ»Ğ°Ğ¼ Ğ±Ğ°ÑĞ¶ÑĞ°Ğ°Ñ€ Ğ»... ğŸ˜Š Ğ˜Ñ€ÑÑ… Ğ¶Ğ¸Ğ»Ò¯Ò¯Ğ´ÑĞ´ Ñ‡ Ğ±Ğ°Ñ Ğ¾Ğ»Ğ¾Ğ½ ÑĞ°Ğ¹Ñ…Ğ°Ğ½ Ğ´ÑƒÑ€ÑĞ°Ğ¼Ğ¶Ğ¸Ğ¹Ğ³ Ñ…Ğ°Ğ¼Ñ‚Ğ´Ğ°Ğ° Ğ±Ò¯Ñ‚ÑÑÑ†Ğ³ÑÑĞµ! Ğ”Ò¯Ò¯Ñ€ÑĞ½ Ñ…Ğ°Ğ¹Ñ€, Ğ°Ğ· Ğ¶Ğ°Ñ€Ğ³Ğ°Ğ», ÑÑ€Ò¯Ò¯Ğ» ÑĞ½Ñ…Ğ¸Ğ¹Ğ³ Ñ…Ò¯ÑÑŒĞµ! â¤ï¸`;
      const koreanMessage = `ì‚¬ë‘í•˜ëŠ” í•€êµ¬ì—ê²Œ,\n\nìƒì¼ ì¶•í•˜í•´! ğŸ‰ ì´ íŠ¹ë³„í•œ ë‚ ì„ ë„ˆì™€ í•¨ê»˜ ì¶•í•˜í•  ìˆ˜ ìˆì–´ì„œ ì •ë§ ê¸°ë». ë„ˆì˜ ë¯¸ì†Œì™€ ì¦ê±°ìš´ ëª¨ìŠµì€ ìš°ë¦¬ì˜ ë§¤ì¼ì„ ë°í˜€ì¤˜. ë„ˆì™€ í•¨ê»˜ ë³´ë‚¸ ëª¨ë“  ìˆœê°„ì€ ì†Œì¤‘í•˜ê³ , ìš°ë¦¬ì˜ ì¶”ì–µ ìƒìëŠ” ê³„ì†í•´ì„œ í’ì„±í•´ì§€ê³  ìˆì–´... ğŸ˜Š ì•ìœ¼ë¡œë„ í•¨ê»˜ ë” ë§ì€ ë©‹ì§„ ì¶”ì–µë“¤ì„ ë§Œë“¤ì–´ê°€ì! ë§ì€ ì‚¬ë‘, í–‰ë³µ, ê·¸ë¦¬ê³  ê±´ê°•ì„ ê¸°ì›í•˜ë©°! â¤ï¸\n\nì‚¬ë‘ì„ ë‹´ì•„,\në„¤ì½” ğŸ¾`;
      let currentMessage = "original"; // Track current language

      // Preloader logic
      window.addEventListener("load", () => {
        const preloader = document.querySelector('.preloader');
        const messageContainer = document.getElementById("message-container");
        
        setTimeout(() => {
          preloader.classList.add('preloader-fade');
          setTimeout(() => {
            preloader.classList.add('preloader-hidden');
            
            // Start animation and typing
            createConfetti(30);
            startTyping(originalMessage);
          }, 500);
        }, 1500);
      });

      // Audio toggle
      // Navigation function with page transition
      document.querySelectorAll('.prev-button, .next-button').forEach(btn => {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          const targetPage = this.getAttribute('href');
          
          // Add page transition effect
          document.body.classList.add('page-transition');
          setTimeout(() => {
            window.location.href = targetPage;
          }, 300);
        });
      });

      // Typing animation logic
      const typingSpeed = 50;
      let charIndex = 0;
      let currentTypingText = "";

      function startTyping(textToType) {
        currentTypingText = textToType;
        charIndex = 0; // Reset index for new text
        const messageElement = document.getElementById("message-body");
        messageElement.textContent = ""; // Clear previous text
        messageElement.classList.remove("typing-done"); // Reset cursor animation
        typeCharacter();
      }

      function typeCharacter() {
        const messageElement = document.getElementById("message-body");
        if (charIndex < currentTypingText.length) {
          messageElement.textContent += currentTypingText.charAt(charIndex);
          charIndex++;
          setTimeout(typeCharacter, typingSpeed);
        } else {
          // Typing finished
          messageElement.classList.add("typing-done"); // Stop cursor animation
          const translateBtn = document.getElementById("translate-btn");
          translateBtn.style.display = "inline-flex"; // Show button
          translateBtn.onclick = toggleTranslation; // Assign click handler
          
          // Add button appear animation
          translateBtn.classList.add("btn-appear");
          
          // Create confetti when message is fully displayed
          createConfetti(20);
        }
      }

      // Toggle Translation Logic
      function toggleTranslation() {
        const messageElement = document.getElementById("message-body");
        const translateBtn = document.getElementById("translate-btn");
        translateBtn.style.display = "none"; // Hide button during typing
        translateBtn.classList.remove("btn-appear");

        if (currentMessage === "original") {
          startTyping(koreanMessage);
          document.getElementById('translate-btn').innerHTML = '<span class="btn-icon">ğŸ‡°ğŸ‡·</span><span>Show Original</span>';
          currentMessage = "korean";
        } else {
          startTyping(originalMessage);
          document.getElementById('translate-btn').innerHTML = '<span class="btn-icon">ğŸ‡°ğŸ‡·</span><span>Translate to Korean</span>';
          currentMessage = "original";
        }
      }
      
      // Confetti function from index.html
      function createConfetti(amount) {
        const container = document.getElementById('confetti-container');
        const shapes = ['circle', 'square', 'triangle'];
        
        for (let i = 0; i < amount; i++) {
          const confetti = document.createElement('div');
          
          // Randomly choose between emoji or shape
          if (Math.random() > 0.7) {
            // Emoji confetti
            confetti.className = 'confetti-emoji';
            const emojis = ['ğŸ’Œ', 'ğŸ’•', 'ğŸ’˜', 'ğŸ’–', 'ğŸ’—', 'ğŸ’“', 'ğŸ’', 'ğŸ’'];
            confetti.textContent = emojis[Math.floor(Math.random() * emojis.length)];
          } else {
            // Shape confetti
            const shapeType = shapes[Math.floor(Math.random() * shapes.length)];
            confetti.className = `confetti confetti-${shapeType}`;
            
            // Random properties
            const size = Math.random() * 10 + 5;
            const colors = ['#ff9aa2', '#ffb7b2', '#ffdac1', '#e2f0cb', '#b5ead7', '#c7ceea', '#f9c1bb', '#ffd6e0'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            confetti.style.width = `${size}px`;
            confetti.style.height = `${size}px`;
            confetti.style.backgroundColor = color;
          }
          
          // Random position
          confetti.style.left = `${Math.random() * 100}%`;
          confetti.style.top = `-20px`;
          
          // Random rotation and delay
          confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
          confetti.style.animationDelay = `${Math.random() * 3}s`;
          confetti.style.animationDuration = `${Math.random() * 2 + 3}s`;
          
          container.appendChild(confetti);
          
          // Remove after animation
          setTimeout(() => {
            if (confetti.parentNode === container) {
              container.removeChild(confetti);
            }
          }, 6000);
        }
      }
    </script>
  </body>
</html>
